<?php

/**
 * Implements hook_menu().
 */
function workbench_moderation_extras_menu() {
  $items = array();

  // Module settings
  $items["admin/config/workbench/moderation_extras"] = array(
    'title' => 'Workbench Moderation Extras',
    'description' => 'Allows to set users to receive email notifications for certain transition states',
    'page callback' => 'drupal_get_form',
    'page arguments' => array(
      'workbench_moderation_extras_admin_settings',
    ),
    'access arguments' => array(
      'administer workbench moderation',
    ),
    'file' => 'workbench_moderation_extras.admin.inc',
  );

  return $items;
}

/**
 * Implements hook_cron_queue_info().
 *
 * Adding our queue of tasks
 */
function workbench_moderation_extras_cron_queue_info() {
  $queues['workbench_moderation_extras_change_state'] = array(
    'worker callback' => 'workbench_moderation_extras_change_state_worker',
    // 'time' => 15, // should it be lower as it's not critical?
    // 'skip on cron' => TRUE, // if you want to skip it and trigger it different
  );
  return $queues;
}

/**
 * Workbench Moderarion change state dummy
 */
function workbench_moderation_extras_change_state_worker($item) {
  watchdog('wmecsw', serialize($item));
}